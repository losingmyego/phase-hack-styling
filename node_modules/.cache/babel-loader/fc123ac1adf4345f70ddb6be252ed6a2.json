{"ast":null,"code":"import _regeneratorRuntime from\"/Users/losingmyego/Downloads/phase-metabolism-hack-functions/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/losingmyego/Downloads/phase-metabolism-hack-functions/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _require=require('./utils/init.js'),phase=_require.phase;var _require2=require('ethers'),ethers=_require2.ethers;var base64=require('base-64');var _require3=require('./displayPhase'),displayPhase=_require3.displayPhase;var user1=\"0x9ecFca6B5dBE01772177F1b4fB660a063D17a7De\";var user2=\"0x6EE6D1DF5E2DccD784f7a4bf8eCE5Dbc1babBD45\";/// @param follower is address initiating the follow\n/// @param following is the person to be followed\nfunction follow(_x,_x2){return _follow.apply(this,arguments);}function _follow(){_follow=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(follower,following){var profileAddress,metadata,tx;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return phase.phase(following);case 3:profileAddress=_context.sent;if(!(profileAddress===ethers.constants.AddressZero)){_context.next=6;break;}return _context.abrupt(\"return\",\"That user doesn't have a profile\");case 6:_context.next=8;return displayPhase(following);case 8:metadata=_context.sent;// Stringify metadata\nmetadata=JSON.stringify(metadata);// Create inline URI \n// TEMP: Will integrate NFT.Storage\nmetadata=\"data:application/json;base64,\"+base64.encode(metadata);_context.next=13;return phase.follow(follower,following,metadata);case 13:tx=_context.sent;return _context.abrupt(\"return\",tx);case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return _follow.apply(this,arguments);}exports.follow=follow;","map":{"version":3,"names":["require","phase","ethers","base64","displayPhase","user1","user2","follow","follower","following","profileAddress","constants","AddressZero","metadata","JSON","stringify","encode","tx","console","log","exports"],"sources":["/Users/losingmyego/Downloads/phase-metabolism-hack-functions/src/Phase/follow.js"],"sourcesContent":["const { phase } = require('./utils/init.js')\nconst { ethers } = require('ethers')\nconst base64 = require('base-64');\n\nconst { displayPhase } = require('./displayPhase')\n\nconst user1 = \"0x9ecFca6B5dBE01772177F1b4fB660a063D17a7De\"\nconst user2 = \"0x6EE6D1DF5E2DccD784f7a4bf8eCE5Dbc1babBD45\"\n\n/// @param follower is address initiating the follow\n/// @param following is the person to be followed\nasync function follow(follower, following) {\n    try {\n        // Get address of Phase Profile\n        let profileAddress = await phase.phase(following)\n\n        // If Phase Profile is Zero Address (i.e. doesn't exist) return\n        if (profileAddress === ethers.constants.AddressZero) {\n            return \"That user doesn't have a profile\"\n        }\n        \n        // Build metadata\n        let metadata = await displayPhase(following)\n\n        // Stringify metadata\n        metadata = JSON.stringify(metadata)\n\n        // Create inline URI \n        // TEMP: Will integrate NFT.Storage\n        metadata = \"data:application/json;base64,\" + base64.encode(metadata)\n\n        let tx = await phase.follow(follower, following, metadata)\n        \n        return tx \n        \n    } catch (error) {\n        console.log(error)\n    }\n    \n}\n\nexports.follow = follow"],"mappings":"oTAAA,aAAkBA,OAAO,CAAC,iBAAD,CAAzB,CAAQC,KAAR,UAAQA,KAAR,CACA,cAAmBD,OAAO,CAAC,QAAD,CAA1B,CAAQE,MAAR,WAAQA,MAAR,CACA,GAAMC,OAAM,CAAGH,OAAO,CAAC,SAAD,CAAtB,CAEA,cAAyBA,OAAO,CAAC,gBAAD,CAAhC,CAAQI,YAAR,WAAQA,YAAR,CAEA,GAAMC,MAAK,CAAG,4CAAd,CACA,GAAMC,MAAK,CAAG,4CAAd,CAEA;AACA;QACeC,O,oIAAf,iBAAsBC,QAAtB,CAAgCC,SAAhC,yLAGmCR,MAAK,CAACA,KAAN,CAAYQ,SAAZ,CAHnC,QAGYC,cAHZ,oBAMYA,cAAc,GAAKR,MAAM,CAACS,SAAP,CAAiBC,WANhD,0DAOmB,kCAPnB,+BAW6BR,aAAY,CAACK,SAAD,CAXzC,QAWYI,QAXZ,eAaQ;AACAA,QAAQ,CAAGC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAAX,CAEA;AACA;AACAA,QAAQ,CAAG,gCAAkCV,MAAM,CAACa,MAAP,CAAcH,QAAd,CAA7C,CAlBR,uBAoBuBZ,MAAK,CAACM,MAAN,CAAaC,QAAb,CAAuBC,SAAvB,CAAkCI,QAAlC,CApBvB,SAoBYI,EApBZ,+CAsBeA,EAtBf,4DAyBQC,OAAO,CAACC,GAAR,cAzBR,qE,yCA8BAC,OAAO,CAACb,MAAR,CAAiBA,MAAjB"},"metadata":{},"sourceType":"module"}